<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Inventario Zeus Safety - Dashboard</title>

  <!-- Google Fonts: Inter -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

  <!-- Bootstrap Icons -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">
  
  <!-- Bootstrap CSS (solo para sistema de rejilla y utilidades, no componentes) -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

  <!-- jsPDF + autotable -->
  <script src="https://cdn.jsdelivr.net/npm/jspdf@2.5.1/dist/jspdf.umd.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/jspdf-autotable@3.8.3/dist/jspdf.plugin.autotable.min.js"></script>

  <!-- SheetJS para Excel (XLSX/XLS) -->
  <script src="https://cdn.jsdelivr.net/npm/xlsx@0.18.5/dist/xlsx.full.min.js"></script>
  
  <!-- Chart.js para dashboard (tendencias/rotación) -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.3/dist/chart.umd.min.js"></script>
  
  <!-- html2canvas para capturas tipo imagen en PDF -->
  <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>

  <!-- CSS Modulares -->
  <link rel="stylesheet" href="assets/css/main.css">
  <link rel="stylesheet" href="assets/css/components.css">
  <link rel="stylesheet" href="assets/css/views.css">
  <link rel="stylesheet" href="assets/css/modals.css">
</head>
<body>

  <!-- Barra de Navegación Lateral (Sidebar) -->
  <nav class="sidebar">
    <div class="sidebar-header">
      <i class="bi bi-shield-check"></i>
      <h3>Zeus Safety</h3>
    </div>
    <ul class="nav-links">
      <li><a href="#" class="nav-item active" data-view="callao"><i class="bi bi-building"></i> <span>Almacén Callao</span></a></li>
      <li><a href="#" class="nav-item" data-view="malvinas"><i class="bi bi-shop"></i> <span>Almacén Malvinas</span></a></li>
      <li><a href="#" class="nav-item" data-view="comparar"><i class="bi bi-arrow-left-right"></i> <span>Comparar</span></a></li>
      <li><a href="#" class="nav-item" data-view="consolidado"><i class="bi bi-diagram-3"></i> <span>Consolidado</span></a></li>
      <li><a href="#" class="nav-item" data-view="registro"><i class="bi bi-archive"></i> <span>Registro</span></a></li>
      <li><a href="#" class="nav-item" data-view="proformas"><i class="bi bi-receipt"></i> <span>Proformas</span></a></li>
    </ul>
    <div class="sidebar-footer d-none"></div>
  </nav>

  <!-- Contenido Principal -->
  <main class="main-content">
    <header class="main-header">
      <div class="header-left">
        <div id="sesion-banner-global"></div>
      </div>
      <div class="header-right">
        <span id="badgeProductos" class="badge bg-secondary align-self-center me-2">Productos: 0</span>
        <span class="api-status loading" id="apiStatus" style="font-size: 0.8rem; padding: 4px 8px; border-radius: 12px; margin-left: 10px; font-weight: 500;">
          <i class="bi bi-arrow-repeat"></i> Conectando a API...
        </span>
        <button class="btn btn-sm btn-outline-primary" onclick="openSesionNumeroModal()" title="Asignar N° Inventario">
          <i class="bi bi-clipboard2"></i> Asignar N°
        </button>
        <button class="btn btn-sm btn-outline-success" onclick="openUnirseModal()" title="Unirse a un N° asignado">
          <i class="bi bi-link-45deg"></i> Unirse N°
        </button>
        <button class="btn btn-sm btn-outline-secondary" onclick="openProcedimientoModal()" title="Procedimiento">
          <i class="bi bi-journal-text"></i>
        </button>
      </div>
    </header>

    <div class="content-wrapper">
      <!-- Las vistas se mantienen igual que en el archivo original -->
      <!-- Se pueden mover a archivos HTML separados si se desea -->
      
      <!-- Vista Callao -->
      <div id="view-callao">
        <!-- Contenido de la vista Callao -->
      </div>

      <!-- Vista Malvinas -->
      <div id="view-malvinas" class="invis">
        <!-- Contenido de la vista Malvinas -->
      </div>

      <!-- Vista Comparar -->
      <div id="view-comparar" class="invis">
        <!-- Contenido de la vista Comparar -->
      </div>

      <!-- Vista Consolidado -->
      <div id="view-consolidado" class="invis">
        <!-- Contenido de la vista Consolidado -->
      </div>

      <!-- Vista Registro -->
      <div id="view-registro" class="invis">
        <!-- Contenido de la vista Registro -->
      </div>

      <!-- Vista Proformas -->
      <div id="view-proformas" class="invis">
        <!-- Contenido de la vista Proformas -->
      </div>

      <!-- Vista Gerencia -->
      <div id="view-gerencia" class="invis">
        <!-- Contenido de la vista Gerencia -->
      </div>
    </div>
  </main>

  <!-- Modales -->
  <!-- Todos los modales del archivo original se mantienen aquí -->
  <!-- O se pueden mover a archivos HTML separados -->

  <!-- JavaScript Modulares (usando ES6 Modules) -->
  <script type="module" src="assets/js/main.js"></script>
  
  <!-- Error Handler Global -->
  <script>
    window.addEventListener('error', function(e) {
      try {
        console.error('[APP ERROR]', e.error || e.message || e);
        alert('Error: ' + (e.error?.message || e.message || e));
      } catch (err) {}
    });
  </script>
</body>
</html>

